{% extends 'base.html' %}
{% block title %}Checkout - MyStore{% endblock %}
{% block content %}

<div class="container py-4">
  <div class="row">
    <!-- Checkout Form Section -->
    <div class="col-lg-8 mb-4">
      <div class="card border-0 shadow-sm rounded-4">
        <div class="card-body p-4">
          <h3 class="mb-4 fw-bold">Checkout</h3>
          <p class="fs-5">Review your order and complete payment.</p>

          <hr>

          <div class="alert alert-warning border-0 rounded-3 mt-3">
            <h6 class="fw-bold mb-2">Manual Payment Details</h6>
            <ul class="list-unstyled">
              <li><strong>OPay Name:</strong> Peter Afolabi</li>
              <li><strong>OPay Number:</strong> 08012345678</li>
            </ul>
            <p class="mb-0">After payment, click <strong>“I Have Paid”</strong> to confirm your order.</p>
          </div>

          <form method="post" action="{% url 'products:confirm-payment' %}" class="mt-4">
            {% csrf_token %}
            <button class="btn btn-success btn-lg w-100 py-3 rounded-pill shadow-sm">I Have Paid</button>
          </form>
        </div>
      </div>
    </div>

    <!-- Order Summary Section -->
    <div class="col-lg-4">
      <div class="card border-0 shadow-sm rounded-4">
        <div class="card-body p-4">
          <h5 class="fw-bold mb-3">Order Summary</h5>
          <ul class="list-group list-group-flush">
            {% for product in products %}
            <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-2">
              <div>
                <p class="mb-1 fw-semibold">{{ product.name }}</p>
                <small class="text-muted">Qty: {{ product.quantity }}</small>
              </div>
              <span>₦{{ product.total_price }}</span>
            </li>
            {% endfor %}
          </ul>

          <hr>

          <div class="d-flex justify-content-between fw-bold fs-5">
            <span>Total:</span>
            <span>₦{{ total }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .card {
    border-radius: 20px;
  }
  .btn-success {
    background-color: #28a745;
    border: none;
  }
  .btn-success:hover {
    background-color: #218838;
  }
</style>

{% endblock %}
